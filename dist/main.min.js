$(document).ready(()=>{$(".team__title").on("click",function(e){e.preventDefault();let t=$(this).siblings(".team__content");const a=$(this).parent(".team__item");a.siblings(".team__item").find(".team__content").css("height",0),$(this).parent().toggleClass("active"),$(this).parent().hasClass("active")?($(this).parent().siblings().removeClass("active"),t.css("height",t.prop("scrollHeight")+"px")):t.css("height",0)})}),$(".board-menu__item").on("click",function(e){e.preventDefault();e=window.matchMedia("(max-width: 768px)").matches;const t=$(this).find(".bm-item__content");$(this).siblings().find(".bm-item__content").css("width",0),$(this).toggleClass("active"),$(this).hasClass("active")?($(this).siblings().removeClass("active"),e?t.css("width",$(window).width()-$(this).find(".bm-item__header").width()*$(this).parent(".board-menu").find(".bm-item__header").length):t.css("width","500px")):t.css("width",0)}),function(){const e=document.querySelector("#humburger"),t=document.querySelector(".fullscrean-menu"),a=document.querySelector(".fullscrean-menu__close"),s=document.body;e.addEventListener("click",e=>{t.classList.add("active"),s.classList.add("body-wrapper"),a.addEventListener("click",e=>{t.classList.remove("active"),s.classList.remove("body-wrapper")})})}(),ymaps.ready(()=>{const e=new ymaps.Map("map",{center:[55.796627,49.119409],zoom:13,controls:[]});const t=new ymaps.GeoObjectCollection({},{draggable:!1,iconLayout:"default#image",iconImageHref:"./img/marker.svg",iconImageSize:[44,54],iconImageOffset:[-3,-42]});[[55.791805,49.113666],[55.809899,49.093185],[55.822082,49.142545]].forEach(e=>{t.add(new ymaps.Placemark(e))}),e.geoObjects.add(t),e.behaviors.disable("scrollZoom")}),$(".form").submit(e=>{e.preventDefault();const t=$(e.currentTarget),a=t.find("[name='name']"),s=t.find("[name='phone']"),n=t.find("[name='comment']"),i=t.find("[name='to']");[a,s,n,i].forEach(e=>{e.removeClass("form__input-error"),""===e.val().trim()&&e.addClass("form__input-error")});const o=$(".modal"),r=o.find(".modal__content");r.removeClass("error__modal"),errorField=t.find(".form__input-error"),0===errorField.length&&$.ajax({url:"https://webdev-api.loftschool.com/sendmail",method:"post",data:{name:a.val(),phone:s.val(),comment:n.val(),to:i.val()},success:e=>{r.text(e.message),$.fancybox.open({src:"#modal",type:"inline"})},error:e=>{e=e.responseJSON.message;r.text(e),r.addClass("error__modal"),$.fancybox.open({src:"#modal",type:"inline"})}}),$(".js__submit-btn").click(e=>{e.preventDefault(),$.fancybox.close()})}),function(){const s=$(".section"),a=$(".maincontent"),n=$(".fixed-menu");let i=!1;s.first().addClass("active");const o=e=>{var t;!1===i&&(i=!0,t=-100*e,(e=>{const t=s.eq(e);"black"===t.attr("data-sidemenu-theme")?n.addClass("fixed-menu_shadowed"):n.removeClass("fixed-menu_shadowed")})(e),a.css({transform:`translateY(${t}%)`}),s.eq(e).addClass("active").siblings().removeClass("active"),n.find(".fixed-menu__item").eq(e).addClass("active").siblings().removeClass("active"),setTimeout(()=>{i=!1},1300))},r=()=>{const e=s.filter(".active"),t=e.next(),a=e.prev();return{next(){t.length&&o(t.index())},prev(){a.length&&o(a.index())}}};$(window).on("wheel",e=>{if(!$(".fullscrean-menu").hasClass("active")){e=e.originalEvent.deltaY;const t=r();0<e&&t.next(),e<0&&t.prev()}}),$(window).on("keydown",e=>{if(!$(".fullscrean-menu").hasClass("active")){var t=e.target.tagName.toLocaleLowerCase();const a=r();if("input"!==t&&"textarea"!==t)switch(e.keyCode){case 38:a.prev();break;case 40:a.next()}}}),$("[data-scroll-to]").click(e=>{e.preventDefault();const t=$(e.currentTarget);e=t.attr("data-scroll-to");const a=$(`[data-section-id=${e}]`);o(a.index())})}(),function(){const t=document.querySelector(".products"),a=$(".product-item").length;$(".product-slider__arrows");const e=$(".product-slider__arrow--left"),s=$(".product-slider__arrow--right");let n=0;const i=document.querySelector(".product-item").clientWidth;e.on("click",function(e){e.preventDefault(),0<n?n--:n=a-1,t.style.left="-"+n*i+"px"}),s.on("click",function(e){e.preventDefault(),n!==a-1?n++:n=0,t.style.left="-"+n*i+"px"})}(),$(document).ready(()=>{$(".interactive-avatar__link").on("click",function(e){e.preventDefault();const t=$(e.currentTarget);var a,e=t.attr("data-open");const s=(a=e,$(".reviews__item").filter((e,t)=>$(t).attr("data-linked-with")===a)),n=t.closest(".reviews__switchcer-item");s.addClass("active").siblings().removeClass("active"),n.addClass("active").siblings().removeClass("active")})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFjY29yZGlvbiB2ZXJ0aWNhbC5qcyIsImFjY29yZGlvbi5qcyIsImh1bWJ1cmdlci5qcyIsIm1hcC5qcyIsIm1vZGFsLmpzIiwib3BjLmpzIiwic2xpZGVyLmpzIiwidGFicy5qcyJdLCJuYW1lcyI6WyIkIiwiZG9jdW1lbnQiLCJyZWFkeSIsIm9uIiwiZSIsInByZXZlbnREZWZhdWx0IiwidGVhbUNvbnRlbnQiLCJ0aGlzIiwic2libGluZ3MiLCJ0ZWFtSXRlbSIsInBhcmVudCIsImZpbmQiLCJjc3MiLCJ0b2dnbGVDbGFzcyIsImhhc0NsYXNzIiwicmVtb3ZlQ2xhc3MiLCJwcm9wIiwiaXNNb2JpbCIsIndpbmRvdyIsIm1hdGNoTWVkaWEiLCJtYXRjaGVzIiwibWVudUNvbnRlbnQiLCJ3aWR0aCIsImxlbmd0aCIsImh1bWJ1cmdlciIsInF1ZXJ5U2VsZWN0b3IiLCJmdWxsTWVudSIsImZ1bGxNZW51Q2xvc2UiLCJib2R5IiwiYWRkRXZlbnRMaXN0ZW5lciIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsInltYXBzIiwibXlNYXAiLCJNYXAiLCJjZW50ZXIiLCJ6b29tIiwiY29udHJvbHMiLCJteUNvbGxlY3Rpb24iLCJHZW9PYmplY3RDb2xsZWN0aW9uIiwiZHJhZ2dhYmxlIiwiaWNvbkxheW91dCIsImljb25JbWFnZUhyZWYiLCJpY29uSW1hZ2VTaXplIiwiaWNvbkltYWdlT2Zmc2V0IiwiZm9yRWFjaCIsImNvb3JkIiwiUGxhY2VtYXJrIiwiZ2VvT2JqZWN0cyIsImJlaGF2aW9ycyIsImRpc2FibGUiLCJzdWJtaXQiLCJmb3JtIiwiY3VycmVudFRhcmdldCIsIm5hbWUiLCJwaG9uZSIsImNvbW1lbnQiLCJ0byIsImVsZW1lbnQiLCJ2YWwiLCJ0cmltIiwiYWRkQ2xhc3MiLCJtb2RhbCIsImNvbnRlbnQiLCJlcnJvckZpZWxkIiwiYWpheCIsInVybCIsIm1ldGhvZCIsImRhdGEiLCJzdWNjZXNzIiwidGV4dCIsIm1lc3NhZ2UiLCJmYW5jeWJveCIsIm9wZW4iLCJzcmMiLCJ0eXBlIiwiZXJyb3IiLCJyZXNwb25zZUpTT04iLCJjbGljayIsImNsb3NlIiwic2VjdGlvbnMiLCJkaXNwbGF5Iiwic2lkZW1lbnUiLCJpblNjcm9sbCIsImZpcnN0IiwicGVyZm9tVHJhbnNpdGlvbiIsInNlY3Rpb25FcSIsInBvc2l0aW9uIiwiY3VycmVudFNlY3Rpb24iLCJlcSIsImF0dHIiLCJjaGFuZ2VNZW51VGhlbWVGb3JTZWN0aW9uIiwidHJhbnNmb3JtIiwic2V0VGltZW91dCIsInZpZXdwb3J0U2Nyb2xsZXIiLCJhY3RpdmVTZWN0aW9uIiwiZmlsdGVyIiwibmV4dFNlY3Rpb24iLCJuZXh0IiwicHJldlNlY3Rpb24iLCJwcmV2IiwiaW5kZXgiLCJkZWx0YVkiLCJvcmlnaW5hbEV2ZW50Iiwic2Nyb2xsZXIiLCJ0YWdOYW1lIiwidGFyZ2V0IiwidG9Mb2NhbGVMb3dlckNhc2UiLCJrZXlDb2RlIiwiJHRoaXMiLCJyZXFTZWN0aW9uIiwic2xpZGVyIiwiaXRlbXNDb3VudCIsImFycm93TGVmdCIsImFycm93UmlnaHQiLCJzdGFydEluZGV4IiwiY2xpZW50V2lkdGgiLCJzdHlsZSIsImxlZnQiLCJzaG93SXRlbSIsIm5keCIsIml0ZW0iLCJhbGlhcyIsImN1ckl0ZW0iLCJjbG9zZXN0Il0sIm1hcHBpbmdzIjoiQUFDQUEsRUFBQUMsVUFBQUMsTUFBQSxLQUNBRixFQUFBLGdCQUFBRyxHQUFBLFFBQUEsU0FBQUMsR0FDQUEsRUFBQUMsaUJBQ0EsSUFBQUMsRUFBQU4sRUFBQU8sTUFBQUMsU0FBQSxrQkFDQSxNQUFBQyxFQUFBVCxFQUFBTyxNQUFBRyxPQUFBLGVBQ0FELEVBQUFELFNBQUEsZUFBQUcsS0FBQSxrQkFBQUMsSUFBQSxTQUFBLEdBQ0FaLEVBQUFPLE1BQUFHLFNBQUFHLFlBQUEsVUFFQWIsRUFBQU8sTUFBQUcsU0FBQUksU0FBQSxXQUNBZCxFQUFBTyxNQUFBRyxTQUFBRixXQUFBTyxZQUFBLFVBQ0FULEVBQUFNLElBQUEsU0FBQU4sRUFBQVUsS0FBQSxn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QUFBLHNCQUFBZ0MsSUFVQUMsRUFBQWQsRUFBQWUsUUFBQSw0QkFFQUwsRUFBQTFELFNBQUEsVUFBQXRELFdBQUFPLFlBQUEsVUFDQTZHLEVBQUE5RCxTQUFBLFVBQUF0RCxXQUFBTyxZQUFBIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiOyhmdW5jdGlvbiAoKXtcclxuICAgICQoZG9jdW1lbnQpLnJlYWR5KCgpID0+IHtcclxuICAgICAgICAkKCcudGVhbV9fdGl0bGUnKS5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgbGV0IHRlYW1Db250ZW50ID0gJCh0aGlzKS5zaWJsaW5ncygnLnRlYW1fX2NvbnRlbnQnKTtcclxuICAgICAgICAgICAgY29uc3QgdGVhbUl0ZW0gPSAkKHRoaXMpLnBhcmVudCgnLnRlYW1fX2l0ZW0nKTtcclxuICAgICAgICAgICAgdGVhbUl0ZW0uc2libGluZ3MoJy50ZWFtX19pdGVtJykuZmluZCgnLnRlYW1fX2NvbnRlbnQnKS5jc3MoJ2hlaWdodCcsIDApO1xyXG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgIFxyXG4gICAgICAgICAgICBpZigkKHRoaXMpLnBhcmVudCgpLmhhc0NsYXNzKCdhY3RpdmUnKSl7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgdGVhbUNvbnRlbnQuY3NzKCdoZWlnaHQnLCB0ZWFtQ29udGVudC5wcm9wKCdzY3JvbGxIZWlnaHQnKSArJ3B4Jyk7XHJcbiAgICBcclxuICAgICAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGVhbUNvbnRlbnQuY3NzKCdoZWlnaHQnLCAwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgfSk7XHJcbn0pKCkiLCI7KGZ1bmN0aW9uICgpIHtcclxuICAgICQoJy5ib2FyZC1tZW51X19pdGVtJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBjb25zdCBpc01vYmlsID0gd2luZG93Lm1hdGNoTWVkaWEoXCIobWF4LXdpZHRoOiA3NjhweClcIikubWF0Y2hlcztcclxuICAgICAgICBjb25zdCBtZW51Q29udGVudCA9ICQodGhpcykuZmluZCgnLmJtLWl0ZW1fX2NvbnRlbnQnKTtcclxuICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCkuZmluZCgnLmJtLWl0ZW1fX2NvbnRlbnQnKS5jc3MoJ3dpZHRoJywgMCk7XHJcbiAgICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcygnYWN0aXZlJyk7XHJcblxyXG4gICAgICAgIGlmKCQodGhpcykuaGFzQ2xhc3MoJ2FjdGl2ZScpKXtcclxuICAgICAgICAgICAgJCh0aGlzKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuXHJcbiAgICAgICAgICAgIGlmKGlzTW9iaWwpe1xyXG4gICAgICAgICAgICAgbWVudUNvbnRlbnQuY3NzKCd3aWR0aCcsICQod2luZG93KS53aWR0aCgpIC0gJCh0aGlzKS5maW5kKCcuYm0taXRlbV9faGVhZGVyJykud2lkdGgoKSAqICQodGhpcykucGFyZW50KCcuYm9hcmQtbWVudScpLmZpbmQoJy5ibS1pdGVtX19oZWFkZXInKS5sZW5ndGgpO1xyXG5cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbWVudUNvbnRlbnQuY3NzKCd3aWR0aCcsICc1MDBweCcpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgbWVudUNvbnRlbnQuY3NzKCd3aWR0aCcsIDApO1xyXG4gICAgICAgIH07XHJcbiAgICB9KTtcclxufSkoKSIsIjsoZnVuY3Rpb24gKCkgeyBcclxuY29uc3QgaHVtYnVyZ2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2h1bWJ1cmdlcicpO1xyXG4gICAgICAgIGNvbnN0IGZ1bGxNZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZ1bGxzY3JlYW4tbWVudScpO1xyXG4gICAgICAgIGNvbnN0IGZ1bGxNZW51Q2xvc2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZnVsbHNjcmVhbi1tZW51X19jbG9zZScpO1xyXG4gICAgICAgIGNvbnN0IGJvZHkgPSBkb2N1bWVudC5ib2R5O1xyXG5cclxuICAgICAgICBodW1idXJnZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcclxuICAgICAgICAgICAgZnVsbE1lbnUuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJylcclxuICAgICAgICAgICAgYm9keS5jbGFzc0xpc3QuYWRkKCdib2R5LXdyYXBwZXInKVxyXG5cclxuICAgICAgICAgICAgZnVsbE1lbnVDbG9zZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xyXG4gICAgICAgICAgICBmdWxsTWVudS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKVxyXG4gICAgICAgICAgICBib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2JvZHktd3JhcHBlcicpXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB9KTtcclxufSkoKSIsIjsoZnVuY3Rpb24gKCl7XHJcbmNvbnN0IGluaXQgPSAoKSA9PiB7XHJcbiAgICBjb25zdCBteU1hcCA9IG5ldyB5bWFwcy5NYXAoXCJtYXBcIiwge1xyXG4gICAgICAgIGNlbnRlcjogWzU1Ljc5NjYyNywgNDkuMTE5NDA5XSxcclxuICAgICAgICB6b29tOiAxMyxcclxuICAgICAgICBjb250cm9sczogW10gXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCBjb29yZHMgPSBbXHJcbiAgICAgICAgWzU1Ljc5MTgwNSwgNDkuMTEzNjY2XSxcclxuICAgICAgICBbNTUuODA5ODk5LCA0OS4wOTMxODVdLFxyXG4gICAgICAgIFs1NS44MjIwODIsIDQ5LjE0MjU0NV1cclxuICAgIF07XHJcbiAgICBjb25zdCBteUNvbGxlY3Rpb24gPSBuZXcgeW1hcHMuR2VvT2JqZWN0Q29sbGVjdGlvbih7fSwge1xyXG4gICAgICAgIGRyYWdnYWJsZTogZmFsc2UsXHJcbiAgICAgICAgaWNvbkxheW91dDogJ2RlZmF1bHQjaW1hZ2UnLFxyXG4gICAgICAgIGljb25JbWFnZUhyZWY6ICcuL2ltZy9tYXJrZXIuc3ZnJyxcclxuICAgICAgICBpY29uSW1hZ2VTaXplOiBbNDQsIDU0XSxcclxuICAgICAgICBpY29uSW1hZ2VPZmZzZXQ6IFstMywgLTQyXVxyXG4gICAgfSk7XHJcbiAgICBjb29yZHMuZm9yRWFjaChjb29yZCA9PiB7XHJcbiAgICAgICAgbXlDb2xsZWN0aW9uLmFkZChuZXcgeW1hcHMuUGxhY2VtYXJrKGNvb3JkKSk7XHJcbiAgICB9KTtcclxuICAgIG15TWFwLmdlb09iamVjdHMuYWRkKG15Q29sbGVjdGlvbik7XHJcbiAgICBteU1hcC5iZWhhdmlvcnMuZGlzYWJsZSgnc2Nyb2xsWm9vbScpO1xyXG59XHJcblxyXG55bWFwcy5yZWFkeShpbml0KTtcclxufSkoKTsiLCI7KGZ1bmN0aW9uICgpIHsgXHJcbiAgICAkKCcuZm9ybScpLnN1Ym1pdCgoZSkgPT4ge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGZvcm0gPSAkKGUuY3VycmVudFRhcmdldCk7XHJcbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBmb3JtLmZpbmQoXCJbbmFtZT0nbmFtZSddXCIpO1xyXG4gICAgICAgICAgICBjb25zdCBwaG9uZSA9IGZvcm0uZmluZChcIltuYW1lPSdwaG9uZSddXCIpO1xyXG4gICAgICAgICAgICBjb25zdCBjb21tZW50ID0gZm9ybS5maW5kKFwiW25hbWU9J2NvbW1lbnQnXVwiKTtcclxuICAgICAgICAgICAgY29uc3QgdG8gPSBmb3JtLmZpbmQoXCJbbmFtZT0ndG8nXVwiKTtcclxuXHJcbiAgICAgICAgICAgIFtuYW1lLCBwaG9uZSwgY29tbWVudCwgdG9dLmZvckVhY2goZWxlbWVudCA9PiB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LnJlbW92ZUNsYXNzKFwiZm9ybV9faW5wdXQtZXJyb3JcIik7XHJcbiAgICAgICAgICAgICAgICBpZihlbGVtZW50LnZhbCgpLnRyaW0oKSA9PT0gXCJcIil7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5hZGRDbGFzcyhcImZvcm1fX2lucHV0LWVycm9yXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG1vZGFsID0gJChcIi5tb2RhbFwiKTtcclxuICAgICAgICAgICAgY29uc3QgY29udGVudCA9IG1vZGFsLmZpbmQoXCIubW9kYWxfX2NvbnRlbnRcIik7XHJcblxyXG4gICAgICAgICAgICBjb250ZW50LnJlbW92ZUNsYXNzKCdlcnJvcl9fbW9kYWwnKTtcclxuXHJcbiAgICAgICAgICAgIGVycm9yRmllbGQgPSBmb3JtLmZpbmQoXCIuZm9ybV9faW5wdXQtZXJyb3JcIilcclxuXHJcbiAgICAgICAgICAgIGlmKGVycm9yRmllbGQubGVuZ3RoID09PSAwKXtcclxuICAgICAgICAgICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBcImh0dHBzOi8vd2ViZGV2LWFwaS5sb2Z0c2Nob29sLmNvbS9zZW5kbWFpbFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogXCJwb3N0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBuYW1lLnZhbCgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwaG9uZTogcGhvbmUudmFsKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1lbnQ6IGNvbW1lbnQudmFsKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvOiB0by52YWwoKSxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQudGV4dChkYXRhLm1lc3NhZ2UpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgJC5mYW5jeWJveC5vcGVuKHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmM6IFwiI21vZGFsXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImlubGluZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiAoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gZGF0YS5yZXNwb25zZUpTT04ubWVzc2FnZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudC50ZXh0KG1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50LmFkZENsYXNzKCdlcnJvcl9fbW9kYWwnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkLmZhbmN5Ym94Lm9wZW4oe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgc3JjOiBcIiNtb2RhbFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImlubGluZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAkKFwiLmpzX19zdWJtaXQtYnRuXCIpLmNsaWNrKGUgPT4ge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICAkLmZhbmN5Ym94LmNsb3NlKCk7XHJcbiAgICAgICAgfSlcclxuICAgIH0pO1xyXG4gICAgfSkoKTsiLCI7KGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnN0IHNlY3Rpb25zID0gJCgnLnNlY3Rpb24nKTtcclxuICAgIGNvbnN0IGRpc3BsYXkgPSAkKCcubWFpbmNvbnRlbnQnKTtcclxuICAgIGNvbnN0IHNpZGVtZW51ID0gJCgnLmZpeGVkLW1lbnUnKTtcclxuXHJcblxyXG4gICAgbGV0IGluU2Nyb2xsID0gZmFsc2U7XHJcblxyXG4gICAgc2VjdGlvbnMuZmlyc3QoKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcblxyXG4gICAgY29uc3QgY291bnRTZWN0aW9uUG9zaXRpb24gPSBzZWN0aW9uRXEgPT4ge1xyXG4gICAgICAgIHJldHVybiBzZWN0aW9uRXEgKiAtMTAwO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGNoYW5nZU1lbnVUaGVtZUZvclNlY3Rpb24gPSAoc2VjdGlvbkVxKSA9PiB7XHJcbiAgICAgICAgY29uc3QgY3VycmVudFNlY3Rpb24gPSBzZWN0aW9ucy5lcShzZWN0aW9uRXEpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWVudVRoZW1lID0gY3VycmVudFNlY3Rpb24uYXR0cihcImRhdGEtc2lkZW1lbnUtdGhlbWVcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYobWVudVRoZW1lID09PSBcImJsYWNrXCIpe1xyXG4gICAgICAgICAgICAgICAgICAgIHNpZGVtZW51LmFkZENsYXNzKCdmaXhlZC1tZW51X3NoYWRvd2VkJylcclxuICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIHNpZGVtZW51LnJlbW92ZUNsYXNzKCdmaXhlZC1tZW51X3NoYWRvd2VkJylcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIH1cclxuICAgXHJcbiAgICBjb25zdCBwZXJmb21UcmFuc2l0aW9uID0gc2VjdGlvbkVxID0+IHtcclxuXHJcbiAgICAgICAgaWYoaW5TY3JvbGw9PT0gZmFsc2Upe1xyXG5cclxuICAgICAgICAgICAgaW5TY3JvbGwgPSB0cnVlO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgcG9zaXRpb24gPSBjb3VudFNlY3Rpb25Qb3NpdGlvbihzZWN0aW9uRXEpO1xyXG5cclxuICAgICAgICAgICAgY2hhbmdlTWVudVRoZW1lRm9yU2VjdGlvbihzZWN0aW9uRXEpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZGlzcGxheS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtOiBgdHJhbnNsYXRlWSgke3Bvc2l0aW9ufSUpYFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHNlY3Rpb25zLmVxKHNlY3Rpb25FcSkuYWRkQ2xhc3MoJ2FjdGl2ZScpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICBzaWRlbWVudS5maW5kKCcuZml4ZWQtbWVudV9faXRlbScpLmVxKHNlY3Rpb25FcSkuYWRkQ2xhc3MoJ2FjdGl2ZScpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG5cclxuXHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaW5TY3JvbGwgPSBmYWxzZTtcclxuICAgICAgICAgICAgfSwgMTMwMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHZpZXdwb3J0U2Nyb2xsZXIgPSAoKSA9PiB7XHJcblxyXG4gICAgICAgIGNvbnN0IGFjdGl2ZVNlY3Rpb24gPSBzZWN0aW9ucy5maWx0ZXIoJy5hY3RpdmUnKTtcclxuICAgICAgICBjb25zdCBuZXh0U2VjdGlvbiA9IGFjdGl2ZVNlY3Rpb24ubmV4dCgpO1xyXG4gICAgICAgIGNvbnN0IHByZXZTZWN0aW9uID0gYWN0aXZlU2VjdGlvbi5wcmV2KCk7XHJcblxyXG4gICAgICAgIHJldHVybntcclxuICAgICAgICAgICAgbmV4dCgpe1xyXG4gICAgICAgICAgICAgICAgaWYobmV4dFNlY3Rpb24ubGVuZ3RoKXtcclxuICAgICAgICAgICAgICAgIHBlcmZvbVRyYW5zaXRpb24obmV4dFNlY3Rpb24uaW5kZXgoKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHByZXYoKSB7XHJcbiAgICAgICAgICAgICAgICBpZihwcmV2U2VjdGlvbi5sZW5ndGgpe1xyXG4gICAgICAgICAgICAgICAgICAgIHBlcmZvbVRyYW5zaXRpb24ocHJldlNlY3Rpb24uaW5kZXgoKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgICQod2luZG93KS5vbignd2hlZWwnLCBlID0+IHtcclxuICAgICAgICBpZigkKCcuZnVsbHNjcmVhbi1tZW51JykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSByZXR1cm5cclxuICAgICAgICBjb25zdCBkZWx0YVkgPSBlLm9yaWdpbmFsRXZlbnQuZGVsdGFZO1xyXG4gICAgICAgIGNvbnN0IHNjcm9sbGVyID0gdmlld3BvcnRTY3JvbGxlcigpO1xyXG5cclxuICAgICAgICBcclxuXHJcbiAgICAgICAgaWYoZGVsdGFZID4gMCkge1xyXG4gICAgICAgICAgICBzY3JvbGxlci5uZXh0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZihkZWx0YVkgPCAwKXtcclxuICAgICAgICAgICAgc2Nyb2xsZXIucHJldigpO1xyXG5cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKHdpbmRvdykub24oJ2tleWRvd24nLCAoZSkgPT4ge1xyXG4gICAgICAgIGlmKCQoJy5mdWxsc2NyZWFuLW1lbnUnKS5oYXNDbGFzcygnYWN0aXZlJykpIHJldHVyblxyXG4gICAgICAgIGNvbnN0IHRhZ05hbWUgPSBlLnRhcmdldC50YWdOYW1lLnRvTG9jYWxlTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgY29uc3Qgc2Nyb2xsZXIgPSB2aWV3cG9ydFNjcm9sbGVyKCk7XHJcblxyXG4gICAgICAgIGlmKHRhZ05hbWUgIT09IFwiaW5wdXRcIiAmJiB0YWdOYW1lICE9PSBcInRleHRhcmVhXCIpe1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGUua2V5Q29kZSkge1xyXG4gICAgICAgICAgICBjYXNlIDM4OlxyXG4gICAgICAgICAgICAgICAgc2Nyb2xsZXIucHJldigpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIDQwOlxyXG4gICAgICAgICAgICAgICAgc2Nyb2xsZXIubmV4dCgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICB9KTtcclxuXHJcbiAgICAkKCdbZGF0YS1zY3JvbGwtdG9dJykuY2xpY2soZSA9PiB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICBjb25zdCAkdGhpcyA9ICQoZS5jdXJyZW50VGFyZ2V0KTtcclxuICAgICAgICBjb25zdCB0YXJnZXQgPSAkdGhpcy5hdHRyKCdkYXRhLXNjcm9sbC10bycpO1xyXG4gICAgICAgIGNvbnN0IHJlcVNlY3Rpb24gPSAkKGBbZGF0YS1zZWN0aW9uLWlkPSR7dGFyZ2V0fV1gKTtcclxuXHJcbiAgICAgICAgcGVyZm9tVHJhbnNpdGlvbihyZXFTZWN0aW9uLmluZGV4KCkpO1xyXG4gICAgfSlcclxuXHJcbiAgICAvLyAkKFwiYm9keVwiKS5zd2lwZSgge1xyXG4gICAgLy8gc3dpcGU6IGZ1bmN0aW9uIChldmVudCwgZGlyZWN0aW9uKSB7XHJcbiAgICAvLyAgICAgY29uc3Qgc2Nyb2xsZXIgPSB2aWV3cG9ydFNjcm9sbGVyKCk7XHJcbiAgICAvLyAgICAgbGV0IHNjcm9sbERpcmVjdGlvbiA9ICcnO1xyXG5cclxuICAgIC8vICAgICBpZihkaXJlY3Rpb24gPT09ICd1cCcpIHNjcm9sbERpcmVjdGlvbiA9IFwibmV4dFwiO1xyXG4gICAgLy8gICAgIGlmKGRpcmVjdGlvbiA9PT0gJ2Rvd24nKSBzY3JvbGxEaXJlY3Rpb24gPSBcInByZXZcIjtcclxuXHJcbiAgICAvLyAgICAgc2Nyb2xsZXJbc2Nyb2xsRGlyZWN0aW9uXSgpO1xyXG4gICAgLy8gfVxyXG4gICAgLy8gfSk7XHJcblxyXG4gICAgXHJcbn0pKCk7IiwiOyhmdW5jdGlvbiAoKSB7XHJcbiAgICBjb25zdCBzbGlkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZHVjdHMnKTtcclxuICAgIGNvbnN0IGl0ZW1zQ291bnQgPSAkKCcucHJvZHVjdC1pdGVtJykubGVuZ3RoO1xyXG4gICAgY29uc3QgYXJyb3dzID0gJCgnLnByb2R1Y3Qtc2xpZGVyX19hcnJvd3MnKTtcclxuICAgIGNvbnN0IGFycm93TGVmdCA9ICQoJy5wcm9kdWN0LXNsaWRlcl9fYXJyb3ctLWxlZnQnKTtcclxuICAgIGNvbnN0IGFycm93UmlnaHQgPSAkKCcucHJvZHVjdC1zbGlkZXJfX2Fycm93LS1yaWdodCcpO1xyXG5cclxuICAgIGxldCBzdGFydEluZGV4ID0gMDtcclxuICAgIGNvbnN0IHdpZHRoID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2R1Y3QtaXRlbScpLmNsaWVudFdpZHRoO1xyXG5cclxuXHJcbiAgICBhcnJvd0xlZnQub24oJ2NsaWNrJywgZnVuY3Rpb24oZSl7XHJcbiAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgIGlmKHN0YXJ0SW5kZXggPiAwKXtcclxuICAgICAgICAgICAgICBzdGFydEluZGV4LS07XHJcbiAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgc3RhcnRJbmRleCA9IGl0ZW1zQ291bnQgLTE7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAgXHJcbiAgICAgICAgIHNsaWRlci5zdHlsZS5sZWZ0ID0gXCItXCIgKyBzdGFydEluZGV4ICogd2lkdGggKyBcInB4XCI7ICAgXHJcbiAgICB9KTtcclxuXHJcbiAgICBhcnJvd1JpZ2h0Lm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpe1xyXG4gICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICBcclxuICAgICBpZihzdGFydEluZGV4ICE9PSBpdGVtc0NvdW50IC0gMSl7XHJcbiAgICAgICAgIHN0YXJ0SW5kZXgrKztcclxuICAgICB9IGVsc2V7XHJcbiAgICAgICAgIHN0YXJ0SW5kZXg9MDtcclxuICAgICB9XHJcblxyXG4gICAgICAgICBzbGlkZXIuc3R5bGUubGVmdCA9IFwiLVwiICsgc3RhcnRJbmRleCAqIHdpZHRoICsgXCJweFwiO1xyXG4gICAgfSk7XHJcbn0pKCk7IiwiOyhmdW5jdGlvbiAoKSB7IFxyXG4gICAgJChkb2N1bWVudCkucmVhZHkoKCkgPT4ge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICBjb25zdCBmaW5kQmxvY2tCeUFsaWFzID0gKGFsaWFzKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiAkKCcucmV2aWV3c19faXRlbScpLmZpbHRlcigobmR4LCBpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiAgJChpdGVtKS5hdHRyKCdkYXRhLWxpbmtlZC13aXRoJykgPT09IGFsaWFzO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkKCcuaW50ZXJhY3RpdmUtYXZhdGFyX19saW5rJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCAkdGhpcyA9ICQoZS5jdXJyZW50VGFyZ2V0KTtcclxuICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gJHRoaXMuYXR0cignZGF0YS1vcGVuJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNob3dJdGVtID0gZmluZEJsb2NrQnlBbGlhcyh0YXJnZXQpO1xyXG4gICAgICAgICAgICBjb25zdCBjdXJJdGVtID0gJHRoaXMuY2xvc2VzdCgnLnJldmlld3NfX3N3aXRjaGNlci1pdGVtJyk7XHJcblxyXG4gICAgICAgICAgICBzaG93SXRlbS5hZGRDbGFzcygnYWN0aXZlJykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIGN1ckl0ZW0uYWRkQ2xhc3MoJ2FjdGl2ZScpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG5cclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9KTtcclxufSkoKTsiXX0=
